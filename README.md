# Pikabu Test
Тестовое задание на вакансию в pikabu.ru  

1. [Техническое задание](#ТЗ)  
1.1. [Требования](#Требования)  
1.2. [Регламенты](#Регламенты)  
1.3. [Приложение А - API](#API)  
2. [Пояснительная записка](#ПЗ)  
2.1. [Использованные библиотеки](#Библиотеки)  
2.2 [Комментарии](#Комментарии)  

<a name="ТЗ"></a>
## Техническое задание

<a name="Требования"></a>
### Требования  
Необходимо написать приложение, которое загружает с сервера данные в JSON формате, обрабатывает их и отображает на экране.  
  
*Приложение должно иметь два экрана:*  
1. Основной экран с двумя вкладками - лента постов, лента сохраненных постов
2. Экран поста  
  
*Основной функционал:*  
- при отсутствии интернет-соединения на вкладке ленты постов необходимо отображать ошибку соединения;
- при отсутствии сохраненных постов необходимо отображать информацию о пустом списке;
- при нажатии на кнопку “Сохранить” пост сохраняется, а кнопка меняет свое состояние на ”Убрать из сохраненного”.  
  
**Важно!**  
Кнопка “Сохранить” есть на всех экранах. При нажатии на “Сохранить” на экране поста и при последующем возврате в ленту состояние кнопки “Сохранить” для сохраненного поста меняется на “Убрать из сохраненного”. При нажатии на “Убрать из сохраненного” на ленте сохраненных постов состояние кнопки “Убрать из сохраненного” для сохраненного поста меняется на “Сохранить”.  
      
*Особенности:*  
- Расположение элементов ячейки поста в ленте не имеет значения, на ваше усмотрение;
- Расположение элементов на экране поста не имеет значения, на ваше усмотрение;
- Архитектура и выбор библиотек на ваш выбор, без ограничений.
- Вместе с кодом требуется отправить и пояснительную записку, объясняющую почему сделан тот или иной выбор, использована та или иная библиотека.

<a name="Регламенты"></a>
### Регламенты
Приложение должно поддерживать систему Android 5.0 и выше.  
Ориентации — портретная и ландшафтная.  
Соблюдение принципов Material Design.  
Язык — Kotlin/Java.  

<a name="API"></a>
### Приложение А - API
| Метод | Описание |
| ------ | ------ |
| https://pikabu.ru/page/interview/mobile-app/test-api/feed.php | Метод для загрузки ленты постов |
| https://pikabu.ru/page/interview/mobile-app/test-api/story.php?id=### | Метод для загрузки конкретного поста по его ID |  
  
<a name="ПЗ"></a>
## Пояснительная записка
  
<a name="Библиотеки"></a>
### Использованные библиотеки  
  
*RecyclerView* - для отображения списка кастомных элементов.  
В совокупности с custom адаптером позволяет отобразить список элементов любого наполнения.  
  
*Volley* - для работы с сетью.  
Позволяет не беспокоиться о потоках, очередности выполнения. Удобно обрабатывать ошибки.  
  
*Gson* - для работы с Json.  
Позволяет без заморочек спарсить json в модель данных. 
  
*LiveData* и *Observer* - для получения данных в асинхроне и реакции на них. 
  
*Picasso* - для работы с изображениями.  
Позволяет не беспокоиться о скачивании изображения, хранении в cache и повторном использовании, чистке памяти.  

*SwipeRefreshLayout* - для обновления данных на странице.  
Позволяет прописать любую необходимую реакцию на swipe экрана сверху вниз.  
  
*BottomNavigationView* - для навигации между фрагментами внизу экрана.  
Позволяет отобразить в нижней части экрана меню с заголовками, иконками, по нажатию на которые будет отображаться определенный фрагмент.
  
*ViewPager2* - для отображения и дополнения навигации между фрагментами.  
В совокупности с custom адаптером позволяет прописать реакцию на slide экрана и переключение между фрагментами.

<a name="Комментарии"></a>
### Комментарии  
  
С учетом того, что нет возможности отправить информацию о сохраненных постах API, мной было принято решение хранить их локально на устройстве (с использованием SharedPreferences).  
  
В качестве реакции на некорректный URL для изображения отображается заглушка, которая дает понять, что изображение не удалось загрузить.  
  
Принято, что по умолчанию у каждого поста должен быть уникальный id. Поэтому полученные от API посты передаются в TreeMap<Int, PikabuPost>. Реакцию на повторный идентификатор было решено не прописывать, чтобы не плодить костыли, потому что такая ситуация является некорректной не на стороне приложения, а на стороне сервера. 
Так что в соответствии с данными, которые на данный момент приходят от API, последний предпоследний пост затирается последним. В списке отображается последний, а при открытии поста - предпоследний, потому что при запросу по id API возвращает первый из постов с одинаковыми id.